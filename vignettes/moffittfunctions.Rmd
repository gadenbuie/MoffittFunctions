---
title: "Introduction to MoffittFunctions"
author: "William (Jimmy) Fulp"
date: "`r Sys.Date()`"
output: rmarkdown::pdf_document
vignette: >
  %\VignetteIndexEntry{Introduction to MoffittFunctions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

options(xtable.comment = FALSE, datatable.verbose = FALSE, scipen = 10, knitr.kable.NA = '', knitr.table.format = 'latex')   

```

# Overview

MoffittFunctions is a collection of useful functions designed to assist in analysis and creation of professional reports. The current MoffittFunctions functions can be broken down to the following sections:

- Testing Functions
  - two_samp_bin_test
  - two_samp_cont_test
  - cor_test
- Fancy Output Functions
  - pretty_pvalues
  - stat_paste
  - paste_tbl_group
  - pretty_model_output
  - run_pretty_model_output
  - pretty_km_output
  - run_pretty_km_output
- Utility Functions
  - round_away_0
  - get_session_info
  - get_full_name
- Example Data
  - Bladder_Cancer

### Getting Started

```{r, echo=TRUE}
# Loading MoffittFunctions and Example Dataset
library(MoffittFunctions)
data("Bladder_Cancer")

suppressPackageStartupMessages(library(dplyr))
```


# Testing Functions

There are currently three testing functions, performing the appropriate statistical test depending on the data and options, returning a p value.


## Comparing Two Groups (Binary Variable) for a Binary Variable 

 `two_samp_bin_test()` is used for comparing a binary variable to a binary (two group) variable, with options for Barnard, Fisher's Exact, Chi-Sq, and McNemar tests. 


```{r, echo=TRUE}

table(Bladder_Cancer$Vital_Status, Bladder_Cancer$PT0N0)

two_samp_bin_test(x = Bladder_Cancer$Vital_Status, y = Bladder_Cancer$PT0N0, 
                  method = 'fisher')

```

## Comparing Two Groups (Binary Variable) for a Continuous Variable 

`two_samp_cont_test()` is used for comparing a continuous variable to a binary (two group) variable, with parametric (t.test) and non-parametric (Wilcox Rank-Sum) options. Also pair data is allowed, where there are parametric (paired t.test) and non-parametric (Wilcox Signed-Rank) options. 



```{r, echo=TRUE}

by(Bladder_Cancer$Survival_Days, Bladder_Cancer$PT0N0, summary)

two_samp_cont_test(x = Bladder_Cancer$Survival_Days, y = Bladder_Cancer$PT0N0, 
                   method = 'wilcox')

```

## Comparing Two Continuous Variables

`cor_test()` is used for comparing two continuous variables, with Pearson, Kendall, and Spearman methods. If Spearman method is chosen and either variable has a tie the approxiate distribution is use in the `coin::spreaman_test()` function. This is usually the perfered method over the asymptotic approximation, which is the method `stats:cor.test()` uses in cases of ties.


```{r, echo=TRUE}

cor(Bladder_Cancer$Age_At_Diagnosis, Bladder_Cancer$Survival_Days, 
    method = 'spearman')

cor_test(x = Bladder_Cancer$Age_At_Diagnosis, y = Bladder_Cancer$Survival_Days,
         method = 'spearman')

```

# Fancy Output Functions


# Utility Functions
